# EBF++ compiler

This is the compiler for the [EBF++][ebfpp] language, an extension of
[Brainf\*ck][bf] (BF). It turns EBF++ code into plain BF.

See [here][ebfpp] for more information on EBF++, a language developed by Pandu
Rendradjaja, John Tran, and John Wilkey.

## Getting started
### Requirements
- `gcc` and `make` (For running BF code. Not necessary for running the EBF++
  compiler itself.)
- `npm`

### First steps
There are a couple of aliases in `aliases.sh`. Let's start by sourcing those:

    . aliases.sh

Next, install the necessary packages:

    npm install

Now let's compile `demo-1.ebf` with the `compile` alias:

    compile demo-1.ebf > demo-1.bf

The result is the BF program `demo-1.bf`. To run this, you'll need a BF
interpreter. For convenience, [bff4] by Oleg Mazonka is included. You'll have
to compile it first, however:

    make interpreter

Now you can run the demo program!

    bf < demo-1.bf

You should see five dots appear in your terminal.

### Next...
You only need to compile the interpreter (`make interpreter`) once. In the
future, you can just use `bf` (assuming you've sourced `aliases.sh`). To
compile and run in one command, use:

    compile some-file.ebf | bf

## Tests

Run `make test`. To add tests, see "Adding tests" [below](#adding-tests).


## Directory structure

### The compiler
- `compiler/`
  - `compiler.js`
  - `run_tests.py`
  - `tests/`: See "Adding tests" [below](#adding-tests).
  - `ebfpp.jison`: Grammar.
  - `ebfpp.js`: Parser module generated by Jison from `ebfpp.jison`.
  - `parser.js`: Command-line interface for `ebfpp.js`. See
    "Parser.js" [below](#parserjs).
  - `util.js`

### Helpers
- `aliases.sh`: Useful shortcuts for working with this project.
- `language-notes.pdf`: Cheat sheet (two pages) of BF, EBF, and EBF++ syntax.
- `bff4/`: The [bff4] BF interpreter by Oleg Mazonka. This is *not* our
  work.
  - You'll have to compile it first with `make interpreter`.

### Included code
This repo includes:

- `demo-1.ebf`: A program demonstrating EBF++ macros. All it does it print
  `.....` to stdout.
- `hello-world.bf`: Hello World in plain BF.
- A variety short examples under `compiler/tests/`.

### Adding tests
Tests are in subdirectories of `compiler/tests/`. Add subdirectories as needed
for organization; `run_tests.py` will find them automatically. Within each
subdirectory, place follows as such:

- `TEST_NAME.ebf`: EBF++ code to be compiled.
- `TEST_NAME.ebf.out`: Expected BF output.

You may see files like `TEST_NAME.ebf.tmp`. These are "actual" output from a
previous test run. These files are `.gitignore`d.

## Parser.js
To use the standalone parser, use the `parse` alias:

    parse demo-1.ebf


[ebfpp]: https://prendradjaja.github.io/ebfpp-demo/
[bf]: https://en.wikipedia.org/wiki/Brainfuck
[bff4]: http://mazonka.com/brainf/
